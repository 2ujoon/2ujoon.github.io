<!DOCTYPE html>
<html>
<head>
<title>다양한 연관관계 매핑.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<p><a href="./%EC%9E%90%EB%B0%94%20ORM%20%ED%91%9C%EC%A4%80%20JPA%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%20-%20%EA%B8%B0%EB%B3%B8%ED%8E%B8.html">목록으로 가기</a>
<a href="../../../../../attachments/jpa_basic/06.%20%EB%8B%A4%EC%96%91%ED%95%9C%20%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%20%EB%A7%A4%ED%95%91.pdf">강의자료</a></p>
<h2 id="%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91">다양한 연관관계 매핑</h2>
<h3 id="%EB%8B%A4%EB%8C%80%EC%9D%BC-n1">다대일 [N:1]</h3>
<h4 id="%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91-%EC%8B%9C-%EA%B3%A0%EB%A0%A4%EC%82%AC%ED%95%AD-3%EA%B0%80%EC%A7%80">연관관계 매핑 시 고려사항 3가지</h4>
<ul>
<li>
<p>다중성</p>
<ul>
<li><code>@ManyToOne</code> / <code>@OneToMany</code> / <code>@OneToOne</code> / <code>@ManyToMany</code></li>
<li><code>@ManyToMany</code>는 거의 쓰이지 않음
<br></li>
</ul>
</li>
<li>
<p>단방향, 양방향</p>
<table>
<thead>
<tr>
<th style="text-align:center">테이블</th>
<th style="text-align:center">객체</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">외래 키 하나로 양쪽 join</td>
<td style="text-align:center">참조용 필드가 있는 쪽으로만 참조</td>
</tr>
<tr>
<td style="text-align:center">방향 개념 없음</td>
<td style="text-align:center">한쪽만 참조하면 단방향, 서로 참조하면 양방향</td>
</tr>
</tbody>
</table>
</li>
</ul>
<br>
<ul>
<li>연관관계의 주인
<ul>
<li>외래 키를 관리하는 참조</li>
<li>테이블은 <strong>외래 키 하나</strong>로 두 테이블이 연관관계를 맺음</li>
<li>객체의 양방향 관계는 사실 <strong>단방향 2개</strong></li>
<li>따라서 참조도 2군데가 있어 둘 중 <em><strong>테이블의 외래 키를 관리할 곳을 지정해야함</strong></em></li>
<li>주인의 반대편은 외래 키에 영향을 주지 않고, <strong>단순 조회만</strong> 가능
<br></li>
</ul>
</li>
</ul>
<h4 id="%EB%8B%A4%EB%8C%80%EC%9D%BC-%EB%8B%A8%EB%B0%A9%ED%96%A5">다대일 단방향</h4>
<p><img src="../../../../../attachments/2023-03-27-04-31-29.png" alt=""></p>
<ul>
<li>가장 많이 사용</li>
<li>다대일의 반대는 일대다
<br></li>
</ul>
<h4 id="%EB%8B%A4%EB%8C%80%EC%9D%BC-%EC%96%91%EB%B0%A9%ED%96%A5">다대일 양방향</h4>
<p><img src="../../../../../attachments/2023-03-27-04-33-35.png" alt=""></p>
<ul>
<li>Team에 <code>List&lt;Member&gt;</code> 추가</li>
<li>단, DB에는 전혀 영향을 주지 않고, 조회만 가능</li>
<li>외래 키가 있는 쪽이 연관관계의 주인</li>
<li>양쪽을 서로 참조하도록 개발
<br></li>
</ul>
<hr>
<h3 id="%EC%9D%BC%EB%8C%80%EB%8B%A4-1n">일대다 [1:N]</h3>
<h4 id="%EC%9D%BC%EB%8C%80%EB%8B%A4-%EB%8B%A8%EB%B0%A9%ED%96%A5">일대다 단방향</h4>
<p><img src="../../../../../attachments/2023-03-27-04-38-06.png" alt=""></p>
<ul>
<li>
<p>DB에서는 무조건 Many 쪽(MEMBER)에 외래 키가 있음</p>
</li>
<li>
<p>Team(One 쪽)에 연관관계의 주인이 설정될 경우</p>
<pre class="hljs"><code><div>Team team = new Team();
team.getMembers().add(member);
em.persist(team);
</div></code></pre>
<ul>
<li>member를 추가하기 위해서 MEMBER 테이블에 UPDATE 쿼리가 추가로 필요</li>
<li>Team 엔티티를 다루는데 MEMBER 테이블에 SQL이 실행됨; 의도하지 않은 엔티티에서 변경이 일어날 수 있음
<br></li>
</ul>
</li>
<li>
<p>객체와 테이블의 차이 때문에 반대편 테이블의 외래 키를 관리하는 특이한 구조</p>
</li>
<li>
<p><code>@JoinColumn</code>을 반드시 사용해야 함</p>
<ul>
<li>사용하지 않으면 조인 테이블 방식 사용(중간 테이블 추가)
<br></li>
</ul>
</li>
<li>
<p>권장되지는 않음</p>
<ul>
<li>엔티티가 관리하는 외래 키가 다른 테이블에 있음</li>
<li>연관관계 관리를 위해 추가로 UPDATE SQL 실행</li>
<li>일대다 단방향 보다는 <strong>다대일 양방향 매핑</strong> 권장
<br></li>
</ul>
</li>
</ul>
<h4 id="%EC%9D%BC%EB%8C%80%EB%8B%A4-%EC%96%91%EB%B0%A9%ED%96%A5">일대다 양방향</h4>
<p><img src="../../../../../attachments/2023-03-27-06-46-11.png" alt=""></p>
<ul>
<li>야매 매핑</li>
<li><code>@JoinColumn(insertable = false, updatable = false)</code></li>
<li><strong>읽기 전용 필드</strong>를 사용해서 양방향처럼 사용</li>
<li><strong>다대일 양방향 매핑</strong> 권장
<br></li>
</ul>
<hr>
<h3 id="%EC%9D%BC%EB%8C%80%EC%9D%BC-11">일대일 [1:1]</h3>
<h4 id="%EC%9D%BC%EB%8C%80%EC%9D%BC-%EA%B4%80%EA%B3%84">일대일 관계</h4>
<ul>
<li>주 테이블이나 대상 테이블 중 택1하여 외래 키 관리</li>
<li>외래 키에 데이터베이스 유니크 제약조건 추가
<br></li>
</ul>
<h4 id="%EC%9D%BC%EB%8C%80%EC%9D%BC--%EC%A3%BC-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%97%90-%EC%99%B8%EB%9E%98-%ED%82%A4-%EB%8B%A8%EB%B0%A9%ED%96%A5">일대일 : 주 테이블에 외래 키 단방향</h4>
<p><img src="../../../../../attachments/2023-03-27-15-04-06.png" alt=""></p>
<ul>
<li>다대일 단방향 매핑과 유사
<br></li>
</ul>
<h4 id="%EC%9D%BC%EB%8C%80%EC%9D%BC--%EC%A3%BC-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%97%90-%EC%99%B8%EB%9E%98-%ED%82%A4-%EC%96%91%EB%B0%A9%ED%96%A5">일대일 : 주 테이블에 외래 키 양방향</h4>
<p><img src="../../../../../attachments/2023-03-27-15-05-59.png" alt=""></p>
<ul>
<li>다대일 양방향 매핑처럼 외래 키가 있는 곳이 연관관계의 주인</li>
<li>반대편은 mappedBy 적용
<br></li>
</ul>
<h4 id="%EC%9D%BC%EB%8C%80%EC%9D%BC--%EB%8C%80%EC%83%81-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%97%90-%EC%99%B8%EB%9E%98-%ED%82%A4-%EB%8B%A8%EB%B0%A9%ED%96%A5">일대일 : 대상 테이블에 외래 키 단방향</h4>
<p><img src="../../../../../attachments/2023-03-27-15-08-34.png" alt=""></p>
<ul>
<li>단방향 관계는 지원하지 않음</li>
<li>양방향 관계는 지원
<br></li>
</ul>
<h4 id="%EC%9D%BC%EB%8C%80%EC%9D%BC--%EB%8C%80%EC%83%81-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%97%90-%EC%99%B8%EB%9E%98-%ED%82%A4-%EC%96%91%EB%B0%A9%ED%96%A5">일대일 : 대상 테이블에 외래 키 양방향</h4>
<p><img src="../../../../../attachments/2023-03-27-15-09-39.png" alt=""></p>
<ul>
<li>일대일 주 테이블에 외래 키 양방향 매핑 방법과 동일
<br></li>
</ul>
<h4 id="%EC%A0%95%EB%A6%AC">정리</h4>
<ul>
<li>
<p>주 테이블에 외래 키</p>
<ul>
<li>주 객체가 대상 객체의 참조를 가짐 == 주 테이블에 외래 키를 두고 대상 테이블을 찾음</li>
<li>객체지향 개발자가 선호</li>
<li>JPA 매핑 관리</li>
<li>장점 : 주 테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능</li>
<li>단점 : 값이 없으면 외래 키에 null 허용
<br></li>
</ul>
</li>
<li>
<p>대상 테이블에 외래 키</p>
<ul>
<li>대상 테이블에 외래 키가 존재</li>
<li>전통적인 DB 개발자가 선호</li>
<li>장점 : 주 테이블과 대상 테이블을 일대일에서 일대다 관계로 변경할 때 테이블 구조 유지</li>
<li>단점 : 프록시 기능의 한계로 <strong>지연 로딩으로 설정해도 항상 즉시 로딩됨</strong>
<br></li>
</ul>
</li>
</ul>
<hr>
<h3 id="%EB%8B%A4%EB%8C%80%EB%8B%A4-nm">다대다 [N:M]</h3>
<h4 id="rdmbs%EC%9D%98-%EB%8B%A4%EB%8C%80%EB%8B%A4">RDMBS의 다대다</h4>
<p><img src="../../../../../attachments/2023-03-29-10-23-50.png" alt=""></p>
<ul>
<li>정규화된 테이블 2개로 다대다 관계를 표현할 수 없음</li>
<li>연결 테이블을 추가해서 일대다, 다대일 관계로 풀어내야 함
<br></li>
</ul>
<h4 id="%EA%B0%9D%EC%B2%B4%EC%9D%98-%EB%8B%A4%EB%8C%80%EB%8B%A4">객체의 다대다</h4>
<p><img src="../../../../../attachments/2023-03-29-10-24-04.png" alt=""></p>
<ul>
<li>객체는 컬렉션을 사용해서 객체 2개로 다대다 관계 가능
<br></li>
</ul>
<h4 id="%EB%8B%A4%EB%8C%80%EB%8B%A4-%EB%A7%A4%ED%95%91">다대다 매핑</h4>
<ul>
<li><code>@ManyToMany</code> 사용</li>
<li><code>@JoinTable</code>로 연결 테이블 지정<pre class="hljs"><code><div>// class Category(주 테이블)
@ManyToMany
@JoinTable(name = &quot;category_item&quot;,
             joinColumns = @JoinColumn(name = &quot;category_id&quot;),
             inverseJoinColumns = @JoinColumn(name = &quot;item_id&quot;))
private List&lt;Category&gt; items;

// class Item(대상 테이블)
@ManyToMany(mappedBy = &quot;items&quot;)
List&lt;Category&gt; categories = new ArrayList&lt;&gt;();
</div></code></pre>
</li>
<li>단방향, 양방향 가능
<br></li>
</ul>
<h4 id="%EB%8B%A4%EB%8C%80%EB%8B%A4-%EB%A7%A4%ED%95%91%EC%9D%98-%ED%95%9C%EA%B3%84">다대다 매핑의 한계</h4>
<ul>
<li>조회 시 연결 연결 테이블이 숨겨져 있기 때문에 쿼리를 예측하기 힘들어짐</li>
<li>실제 비즈니스에서는 연결 테이블이 단순하게 연결만 하고 끝나지 않음
<ul>
<li>주문시간, 수량 같은 데이터가 들어올 수 있음</li>
<li>매핑 정보만 들어오고 추가 정보를 사용할 수 없음
<br></li>
</ul>
</li>
</ul>
<h4 id="%ED%95%9C%EA%B3%84-%EA%B7%B9%EB%B3%B5">한계 극복</h4>
<p><img src="../../../../../attachments/2023-03-29-10-39-11.png" alt=""></p>
<ul>
<li>연결 테이블용 엔티티 추가(= 연결 테이블을 엔티티로 승격)</li>
<li><code>@ManyToMany</code> -&gt; <code>@OneToMany</code>, <code>@ManyToOne</code></li>
<li>이 때, 연결 테이블의 기본 키는 각 테이블의 외래 키 2개의 복합 키로 사용하기보다는 <strong>인공 키를 사용</strong>할 것을 권장
<ul>
<li>차후 변경이 생길 경우 PK가 종속되어 있으면 테이블 수정의 규모가 커질 수 있기 때문
<br></li>
</ul>
</li>
</ul>
<hr>
<h3 id="%EC%8B%A4%EC%A0%84-%EC%98%88%EC%A0%9C-3---%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91">실전 예제 3 - 다양한 연관관계 매핑</h3>
<h4 id="%EC%97%94%ED%8B%B0%ED%8B%B0">엔티티</h4>
<p><img src="../../../../../attachments/2023-03-29-10-56-24.png" alt=""></p>
<ul>
<li>배송, 카테고리 추가</li>
<li>주문과 배송은 1:1</li>
<li>상품과 카테고리는 N:M
<br></li>
</ul>
<h4 id="erd">ERD</h4>
<p><img src="../../../../../attachments/2023-03-29-10-57-20.png" alt=""></p>
<ul>
<li>주문(주 테이블) 에서 외래 키를 관리</li>
<li>카테고리 - 상품의 다대다 관계는 권장하지 않지만 예시를 위해 다대다 매핑
<ul>
<li>필드를 추가할 수 없고, 엔티티와 테이블이 불일치함
<br></li>
</ul>
</li>
</ul>
<h4 id="joincolumn"><code>@JoinColumn</code></h4>
<ul>
<li>
<p>외래 키를 매핑할 때 사용</p>
<table>
<thead>
<tr>
<th style="text-align:center">속성</th>
<th style="text-align:center">설명</th>
<th style="text-align:center">기본값</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">name</td>
<td style="text-align:center">매핑할 외래 키 이름</td>
<td style="text-align:center">필드명_참조하는 테이블의 기본 키 컬럼명</td>
</tr>
<tr>
<td style="text-align:center">referencedColumnName</td>
<td style="text-align:center">외래 키가 참조하는 대상 테이블의 컬럼명</td>
<td style="text-align:center">참조하는 테이블의 기본 키 컬럼명</td>
</tr>
<tr>
<td style="text-align:center">foreignKey(DDL)</td>
<td style="text-align:center">외래 키 제약조건을 직접 지정<br>테이블 생성 시에만 사용</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">unique(DDL)</td>
<td style="text-align:center">컬럼에 유니크 제약조건을 지정</td>
<td style="text-align:center">false</td>
</tr>
<tr>
<td style="text-align:center">nullable(DDL)</td>
<td style="text-align:center">false로 설정 시 컬럼에 NOT NULL 제약조건을 지정</td>
<td style="text-align:center">true</td>
</tr>
<tr>
<td style="text-align:center">insertable</td>
<td style="text-align:center">읽기 전용에서 사용<br>false 설정 시 이 필드를 DB에 저장하지 않음</td>
<td style="text-align:center">true</td>
</tr>
<tr>
<td style="text-align:center">updatable</td>
<td style="text-align:center">읽기 전용에서 사용<br>false 설정 시 이 필드를 DB에서 수정하지 않음</td>
<td style="text-align:center">true</td>
</tr>
<tr>
<td style="text-align:center">columnDefinition(DDL)</td>
<td style="text-align:center">데이터베이스 컬럼 정보를 직접 지정</td>
<td style="text-align:center">자바 필드 타입, dialect 정보를 참고해 생성</td>
</tr>
<tr>
<td style="text-align:center">table</td>
<td style="text-align:center"><a href="https://www.objectdb.com/api/java/jpa/JoinColumn/table">링크 참고</a></td>
<td style="text-align:center">현재 클래스가 매핑된 테이블</td>
</tr>
</tbody>
</table>
<ul>
<li><em><strong>!주의</strong></em> 외래 키 제약조건을 매핑하는 것이 아님
<br></li>
</ul>
</li>
</ul>
<h4 id="manytoone"><code>@ManyToOne</code></h4>
<ul>
<li>다대일 관계 매핑
<table>
<thead>
<tr>
<th style="text-align:center">속성</th>
<th style="text-align:center">설명</th>
<th style="text-align:center">기본값</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">optional</td>
<td style="text-align:center">false 설정 시 연관된 엔티티가 항상 있어야 함</td>
<td style="text-align:center">true</td>
</tr>
<tr>
<td style="text-align:center">fetch</td>
<td style="text-align:center">글로벌 페치 전략을 설정</td>
<td style="text-align:center"><code>@ManyToOne = FetchType.EAGER</code><br><code>@OneToMany = FetchType.LAZY</code></td>
</tr>
<tr>
<td style="text-align:center">cascade</td>
<td style="text-align:center">영속성 전이 기능을 사용</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">targetEntity</td>
<td style="text-align:center">연관된 엔티티의 타입 정보를 설정<br>거의 사용하지 않음</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<ul>
<li>다대일에는 mappedBy 속성이 없음; <strong>연관관계의 주인이 되야 함</strong>
<br></li>
</ul>
</li>
</ul>
<h4 id="onetomany"><code>@OneToMany</code></h4>
<ul>
<li>일대다 관계 매핑
<table>
<thead>
<tr>
<th style="text-align:center">속성</th>
<th style="text-align:center">설명</th>
<th style="text-align:center">기본값</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">mappedBy</td>
<td style="text-align:center">연관관계의 주인인 필드를 지정</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">fetch</td>
<td style="text-align:center">글로벌 페치 전략을 설정</td>
<td style="text-align:center"><code>@ManyToOne = FetchType.EAGER</code><br><code>@OneToMany = FetchType.LAZY</code></td>
</tr>
<tr>
<td style="text-align:center">cascade</td>
<td style="text-align:center">영속성 전이 기능을 사용</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">targetEntity</td>
<td style="text-align:center">연관된 엔티티의 타입 정보를 설정<br>거의 사용하지 않음</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
</li>
</ul>
<br>

</body>
</html>
